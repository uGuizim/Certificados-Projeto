{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{api}from\"../services/api\";import jsPDF from\"jspdf\";import\"jspdf-autotable\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ListarCertificados(){const[certificados,setCertificados]=useState([]);useEffect(()=>{api.get(\"certificados/\").then(res=>setCertificados(res.data));},[]);const excluirCertificado=async id=>{await api.delete(`certificados/${id}/`);setCertificados(certificados.filter(certificado=>certificado.id!==id));alert(\"Certificado excluído!\");};const gerarPDF=certificado=>{const doc=new jsPDF();// Adicionar título\ndoc.setFontSize(22);doc.text(\"CERTIFICADO\",105,60,null,null,'center');// Adicionar texto do certificado\ndoc.setFontSize(12);const text=`Certificamos que o participante ${certificado.participante_nome}, portador do RG:_________\nparticipou do Curso: ${certificado.treinamento_titulo}, no período \nde __________ a __________ com carga horária de ${certificado.carga_horaria} horas.`;doc.text(text,20,80);// Adicionar local e data\ndoc.text(`Cidade ______________, data __________`,20,120);// Adicionar assinaturas\ndoc.text(\"____________________________\",20,150);doc.text(\"Nome\",20,155);doc.text(\"Número do registro\",20,165);doc.text(\"____________________________\",140,150);doc.text(\"Nome\",140,155);doc.text(\"Concluinte\",140,160);// Adicionar rodapé\ndoc.text(\"Rua:____________________ N° ____ Quadra. _____, Lotes _____. Bairro: __________________\",20,190);doc.save(`certificado_${certificado.participante_nome}_${certificado.treinamento_titulo}.pdf`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Lista de Certificados\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"Participante\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"Treinamento\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"Carga Hor\\xE1ria\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"Data de Emiss\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:certificados.map(certificado=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:certificado.participante_nome}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:certificado.treinamento_titulo}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:certificado.carga_horaria}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:new Date(certificado.data_emissao).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"border px-4 py-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>excluirCertificado(certificado.id),className:\"bg-red-500 text-white px-4 py-2 rounded mr-2\",children:\"Excluir\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>gerarPDF(certificado),className:\"bg-blue-500 text-white px-4 py-2 rounded\",children:\"Download PDF\"})]})]},certificado.id))})]})]});}","map":{"version":3,"names":["React","useState","useEffect","api","jsPDF","jsx","_jsx","jsxs","_jsxs","ListarCertificados","certificados","setCertificados","get","then","res","data","excluirCertificado","id","delete","filter","certificado","alert","gerarPDF","doc","setFontSize","text","participante_nome","treinamento_titulo","carga_horaria","save","className","children","map","Date","data_emissao","toLocaleDateString","onClick"],"sources":["C:/Users/PCGAMER/OneDrive/Documentos/Certificados-Projeto/frontend/src/pages/ListarCertificados.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { api } from \"../services/api\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nexport default function ListarCertificados() {\r\n  const [certificados, setCertificados] = useState([]);\r\n\r\n  useEffect(() => {\r\n    api.get(\"certificados/\").then((res) => setCertificados(res.data));\r\n  }, []);\r\n\r\n  const excluirCertificado = async (id) => {\r\n    await api.delete(`certificados/${id}/`);\r\n    setCertificados(certificados.filter(certificado => certificado.id !== id));\r\n    alert(\"Certificado excluído!\");\r\n  };\r\n\r\n  const gerarPDF = (certificado) => {\r\n    const doc = new jsPDF();\r\n\r\n    // Adicionar título\r\n    doc.setFontSize(22);\r\n    doc.text(\"CERTIFICADO\", 105, 60, null, null, 'center');\r\n\r\n    // Adicionar texto do certificado\r\n    doc.setFontSize(12);\r\n    const text = `Certificamos que o participante ${certificado.participante_nome}, portador do RG:_________\r\nparticipou do Curso: ${certificado.treinamento_titulo}, no período \r\nde __________ a __________ com carga horária de ${certificado.carga_horaria} horas.`;\r\n    doc.text(text, 20, 80);\r\n\r\n    // Adicionar local e data\r\n    doc.text(`Cidade ______________, data __________`, 20, 120);\r\n\r\n    // Adicionar assinaturas\r\n    doc.text(\"____________________________\", 20, 150);\r\n    doc.text(\"Nome\", 20, 155);\r\n    doc.text(\"Número do registro\", 20, 165);\r\n\r\n    doc.text(\"____________________________\", 140, 150);\r\n    doc.text(\"Nome\", 140, 155);\r\n    doc.text(\"Concluinte\", 140, 160);\r\n\r\n    // Adicionar rodapé\r\n    doc.text(\"Rua:____________________ N° ____ Quadra. _____, Lotes _____. Bairro: __________________\", 20, 190);\r\n\r\n    doc.save(`certificado_${certificado.participante_nome}_${certificado.treinamento_titulo}.pdf`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold\">Lista de Certificados</h1>\r\n      <table className=\"min-w-full bg-white\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"py-2\">Participante</th>\r\n            <th className=\"py-2\">Treinamento</th>\r\n            <th className=\"py-2\">Carga Horária</th>\r\n            <th className=\"py-2\">Data de Emissão</th>\r\n            <th className=\"py-2\">Ações</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {certificados.map((certificado) => (\r\n            <tr key={certificado.id}>\r\n              <td className=\"border px-4 py-2\">{certificado.participante_nome}</td>\r\n              <td className=\"border px-4 py-2\">{certificado.treinamento_titulo}</td>\r\n              <td className=\"border px-4 py-2\">{certificado.carga_horaria}</td>\r\n              <td className=\"border px-4 py-2\">{new Date(certificado.data_emissao).toLocaleDateString()}</td>\r\n              <td className=\"border px-4 py-2\">\r\n                <button onClick={() => excluirCertificado(certificado.id)} className=\"bg-red-500 text-white px-4 py-2 rounded mr-2\">\r\n                  Excluir\r\n                </button>\r\n                <button onClick={() => gerarPDF(certificado)} className=\"bg-blue-500 text-white px-4 py-2 rounded\">\r\n                  Download PDF\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}